{"dependencies":[{"name":"./validate.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":20,"column":0,"index":648},"end":{"line":20,"column":43,"index":691}}],"key":"4q4sLtjLw/OKlBGplWkTHFBWdWQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  /*\n   * Copyright (c) 2016-present Invertase Limited & Contributors\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this library except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *   http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   *\n   */\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.promiseDefer = promiseDefer;\n  exports.promiseWithOptionalCallback = promiseWithOptionalCallback;\n  var _validateJs = require(_dependencyMap[0], \"./validate.js\");\n  /**\n   * Creates a deferred promise\n   */\n  function promiseDefer() {\n    var deferred = {\n      promise: null,\n      resolve: null,\n      reject: null\n    };\n    deferred.promise = new Promise((resolve, reject) => {\n      deferred.resolve = resolve;\n      deferred.reject = reject;\n    });\n    return deferred;\n  }\n\n  /**\n   * Attaches an optional callback to a promise\n   * @param promise\n   * @param callback\n   */\n  function promiseWithOptionalCallback(promise, callback) {\n    if (!(0, _validateJs.isFunction)(callback)) {\n      return promise;\n    }\n    return promise.then(result => {\n      if (callback && callback.length === 1) {\n        callback(null);\n      } else if (callback) {\n        callback(null, result);\n      }\n      return result;\n    }).catch(error => {\n      if (callback) {\n        callback(error);\n      }\n      return Promise.reject(error);\n    });\n  }\n});","lineCount":65,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[5,0,4,0],[6,0,5,0],[7,0,6,0],[8,0,7,0],[9,0,8,0],[10,0,9,0],[11,0,10,0],[12,0,11,0],[13,0,12,0],[14,0,13,0],[15,0,14,0],[16,0,15,0],[17,0,16,0],[18,0,17,0],[19,0,18,0],[20,2,3,0,"Object"],[20,8,3,0],[20,9,3,0,"defineProperty"],[20,23,3,0],[20,24,3,0,"exports"],[20,31,3,0],[21,4,3,0,"value"],[21,9,3,0],[22,2,3,0],[23,2,24,0,"exports"],[23,9,24,0],[23,10,24,0,"promiseDefer"],[23,22,24,0],[23,25,24,0,"promiseDefer"],[23,37,24,0],[24,2,42,0,"exports"],[24,9,42,0],[24,10,42,0,"promiseWithOptionalCallback"],[24,37,42,0],[24,40,42,0,"promiseWithOptionalCallback"],[24,67,42,0],[25,2,20,0],[25,6,20,0,"_validateJs"],[25,17,20,0],[25,20,20,0,"require"],[25,27,20,0],[25,28,20,0,"_dependencyMap"],[25,42,20,0],[26,2,21,0],[27,0,22,0],[28,0,23,0],[29,2,24,7],[29,11,24,16,"promiseDefer"],[29,23,24,28,"promiseDefer"],[29,24,24,28],[29,26,24,31],[30,4,25,2],[30,8,25,8,"deferred"],[30,16,25,16],[30,19,25,19],[31,6,26,4,"promise"],[31,13,26,11],[31,15,26,13],[31,19,26,17],[32,6,27,4,"resolve"],[32,13,27,11],[32,15,27,13],[32,19,27,17],[33,6,28,4,"reject"],[33,12,28,10],[33,14,28,12],[34,4,29,2],[34,5,29,3],[35,4,30,2,"deferred"],[35,12,30,10],[35,13,30,11,"promise"],[35,20,30,18],[35,23,30,21],[35,27,30,25,"Promise"],[35,34,30,32],[35,35,30,33],[35,36,30,34,"resolve"],[35,43,30,41],[35,45,30,43,"reject"],[35,51,30,49],[35,56,30,54],[36,6,31,4,"deferred"],[36,14,31,12],[36,15,31,13,"resolve"],[36,22,31,20],[36,25,31,23,"resolve"],[36,32,31,30],[37,6,32,4,"deferred"],[37,14,32,12],[37,15,32,13,"reject"],[37,21,32,19],[37,24,32,22,"reject"],[37,30,32,28],[38,4,33,2],[38,5,33,3],[38,6,33,4],[39,4,34,2],[39,11,34,9,"deferred"],[39,19,34,17],[40,2,35,0],[42,2,37,0],[43,0,38,0],[44,0,39,0],[45,0,40,0],[46,0,41,0],[47,2,42,7],[47,11,42,16,"promiseWithOptionalCallback"],[47,38,42,43,"promiseWithOptionalCallback"],[47,39,42,44,"promise"],[47,46,42,51],[47,48,42,53,"callback"],[47,56,42,61],[47,58,42,63],[48,4,43,2],[48,8,43,6],[48,9,43,7],[48,13,43,7,"isFunction"],[48,24,43,17],[48,25,43,17,"isFunction"],[48,35,43,17],[48,37,43,18,"callback"],[48,45,43,26],[48,46,43,27],[48,48,43,29],[49,6,44,4],[49,13,44,11,"promise"],[49,20,44,18],[50,4,45,2],[51,4,46,2],[51,11,46,9,"promise"],[51,18,46,16],[51,19,46,17,"then"],[51,23,46,21],[51,24,46,22,"result"],[51,30,46,28],[51,34,46,32],[52,6,47,4],[52,10,47,8,"callback"],[52,18,47,16],[52,22,47,20,"callback"],[52,30,47,28],[52,31,47,29,"length"],[52,37,47,35],[52,42,47,40],[52,43,47,41],[52,45,47,43],[53,8,48,6,"callback"],[53,16,48,14],[53,17,48,15],[53,21,48,19],[53,22,48,20],[54,6,49,4],[54,7,49,5],[54,13,49,11],[54,17,49,15,"callback"],[54,25,49,23],[54,27,49,25],[55,8,50,6,"callback"],[55,16,50,14],[55,17,50,15],[55,21,50,19],[55,23,50,21,"result"],[55,29,50,27],[55,30,50,28],[56,6,51,4],[57,6,52,4],[57,13,52,11,"result"],[57,19,52,17],[58,4,53,2],[58,5,53,3],[58,6,53,4],[58,7,53,5,"catch"],[58,12,53,10],[58,13,53,11,"error"],[58,18,53,16],[58,22,53,20],[59,6,54,4],[59,10,54,8,"callback"],[59,18,54,16],[59,20,54,18],[60,8,55,6,"callback"],[60,16,55,14],[60,17,55,15,"error"],[60,22,55,20],[60,23,55,21],[61,6,56,4],[62,6,57,4],[62,13,57,11,"Promise"],[62,20,57,18],[62,21,57,19,"reject"],[62,27,57,25],[62,28,57,26,"error"],[62,33,57,31],[62,34,57,32],[63,4,58,2],[63,5,58,3],[63,6,58,4],[64,2,59,0],[65,0,59,1],[65,3]],"functionMap":{"names":["<global>","promiseDefer","Promise$argument_0","promiseWithOptionalCallback","then$argument_0","then._catch$argument_0"],"mappings":"AAA;OCuB;iCCM;GDG;CDE;OGO;sBCI;GDO,QE;GFK;CHC"},"hasCjsExports":false},"type":"js/module"}]}