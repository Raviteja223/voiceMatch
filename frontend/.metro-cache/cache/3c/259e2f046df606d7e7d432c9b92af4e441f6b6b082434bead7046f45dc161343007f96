{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"./modular","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}}],"key":"6fY5dOmpz6PAPB/n84EJgks6RRY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.multiFactor = multiFactor;\n  Object.defineProperty(exports, \"MultiFactorUser\", {\n    enumerable: true,\n    get: function () {\n      return MultiFactorUser;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _modular = require(_dependencyMap[3], \"./modular\");\n  /**\n   * Return a MultiFactorUser instance the gateway to multi-factor operations.\n   */\n  function multiFactor(auth) {\n    return new MultiFactorUser(auth);\n  }\n  var MultiFactorUser = /*#__PURE__*/function () {\n    function MultiFactorUser(auth, user) {\n      (0, _classCallCheck.default)(this, MultiFactorUser);\n      this._auth = auth;\n      if (user === undefined) {\n        user = auth.currentUser;\n      }\n      this._user = user;\n      this.enrolledFactors = user.multiFactor.enrolledFactors;\n    }\n    return (0, _createClass.default)(MultiFactorUser, [{\n      key: \"getSession\",\n      value: function getSession() {\n        return this._auth.native.getSession();\n      }\n\n      /**\n       * Finalize the enrollment process for the given multi-factor assertion.\n       * Optionally set a displayName. This method will reload the current user\n       * profile, which is necessary to see the multi-factor changes.\n       */\n    }, {\n      key: \"enroll\",\n      value: (function () {\n        var _enroll = (0, _asyncToGenerator.default)(function* (multiFactorAssertion, displayName) {\n          var token = multiFactorAssertion.token,\n            secret = multiFactorAssertion.secret,\n            totpSecret = multiFactorAssertion.totpSecret,\n            verificationCode = multiFactorAssertion.verificationCode;\n          if (token && secret) {\n            yield this._auth.native.finalizeMultiFactorEnrollment(token, secret, displayName);\n          } else if (totpSecret && verificationCode) {\n            yield this._auth.native.finalizeTotpEnrollment(totpSecret, verificationCode, displayName);\n          } else {\n            throw new Error('Invalid multi-factor assertion provided for enrollment.');\n          }\n\n          // We need to reload the user otherwise the changes are not visible\n          // TODO reload not working on Other platform\n          return (0, _modular.reload)(this._auth.currentUser);\n        });\n        function enroll(_x, _x2) {\n          return _enroll.apply(this, arguments);\n        }\n        return enroll;\n      }())\n    }, {\n      key: \"unenroll\",\n      value: function () {\n        var _unenroll = (0, _asyncToGenerator.default)(function* (enrollmentId) {\n          yield this._auth.native.unenrollMultiFactor(enrollmentId);\n          if (this._auth.currentUser) {\n            return (0, _modular.reload)(this._auth.currentUser);\n          }\n        });\n        function unenroll(_x3) {\n          return _unenroll.apply(this, arguments);\n        }\n        return unenroll;\n      }()\n    }]);\n  }();\n});","lineCount":94,"map":[[12,2,5,0,"exports"],[12,9,5,0],[12,10,5,0,"multiFactor"],[12,21,5,0],[12,24,5,0,"multiFactor"],[12,35,5,0],[13,2,9,0,"Object"],[13,8,9,0],[13,9,9,0,"defineProperty"],[13,23,9,0],[13,24,9,0,"exports"],[13,31,9,0],[14,4,9,0,"enumerable"],[14,14,9,0],[15,4,9,0,"get"],[15,7,9,0],[15,18,9,0,"get"],[15,19,9,0],[16,6,9,0],[16,13,9,0,"MultiFactorUser"],[16,28,9,0],[17,4,9,0],[18,2,9,0],[19,2,50,1],[19,6,50,1,"_babelRuntimeHelpersAsyncToGenerator"],[19,42,50,1],[19,45,50,1,"require"],[19,52,50,1],[19,53,50,1,"_dependencyMap"],[19,67,50,1],[20,2,50,1],[20,6,50,1,"_asyncToGenerator"],[20,23,50,1],[20,26,50,1,"_interopDefault"],[20,41,50,1],[20,42,50,1,"_babelRuntimeHelpersAsyncToGenerator"],[20,78,50,1],[21,2,50,1],[21,6,50,1,"_babelRuntimeHelpersClassCallCheck"],[21,40,50,1],[21,43,50,1,"require"],[21,50,50,1],[21,51,50,1,"_dependencyMap"],[21,65,50,1],[22,2,50,1],[22,6,50,1,"_classCallCheck"],[22,21,50,1],[22,24,50,1,"_interopDefault"],[22,39,50,1],[22,40,50,1,"_babelRuntimeHelpersClassCallCheck"],[22,74,50,1],[23,2,50,1],[23,6,50,1,"_babelRuntimeHelpersCreateClass"],[23,37,50,1],[23,40,50,1,"require"],[23,47,50,1],[23,48,50,1,"_dependencyMap"],[23,62,50,1],[24,2,50,1],[24,6,50,1,"_createClass"],[24,18,50,1],[24,21,50,1,"_interopDefault"],[24,36,50,1],[24,37,50,1,"_babelRuntimeHelpersCreateClass"],[24,68,50,1],[25,2,1,0],[25,6,1,0,"_modular"],[25,14,1,0],[25,17,1,0,"require"],[25,24,1,0],[25,25,1,0,"_dependencyMap"],[25,39,1,0],[26,2,2,0],[27,0,3,0],[28,0,4,0],[29,2,5,7],[29,11,5,16,"multiFactor"],[29,22,5,27,"multiFactor"],[29,23,5,28,"auth"],[29,27,5,32],[29,29,5,34],[30,4,6,2],[30,11,6,9],[30,15,6,13,"MultiFactorUser"],[30,30,6,28],[30,31,6,29,"auth"],[30,35,6,33],[30,36,6,34],[31,2,7,0],[32,2,7,1],[32,6,9,13,"MultiFactorUser"],[32,21,9,28],[33,4,10,2],[33,13,10,2,"MultiFactorUser"],[33,29,10,14,"auth"],[33,33,10,18],[33,35,10,20,"user"],[33,39,10,24],[33,41,10,26],[34,6,10,26],[34,10,10,26,"_classCallCheck"],[34,25,10,26],[34,26,10,26,"default"],[34,33,10,26],[34,41,10,26,"MultiFactorUser"],[34,56,10,26],[35,6,11,4],[35,10,11,8],[35,11,11,9,"_auth"],[35,16,11,14],[35,19,11,17,"auth"],[35,23,11,21],[36,6,12,4],[36,10,12,8,"user"],[36,14,12,12],[36,19,12,17,"undefined"],[36,28,12,26],[36,30,12,28],[37,8,13,6,"user"],[37,12,13,10],[37,15,13,13,"auth"],[37,19,13,17],[37,20,13,18,"currentUser"],[37,31,13,29],[38,6,14,4],[39,6,15,4],[39,10,15,8],[39,11,15,9,"_user"],[39,16,15,14],[39,19,15,17,"user"],[39,23,15,21],[40,6,16,4],[40,10,16,8],[40,11,16,9,"enrolledFactors"],[40,26,16,24],[40,29,16,27,"user"],[40,33,16,31],[40,34,16,32,"multiFactor"],[40,45,16,43],[40,46,16,44,"enrolledFactors"],[40,61,16,59],[41,4,17,2],[42,4,17,3],[42,15,17,3,"_createClass"],[42,27,17,3],[42,28,17,3,"default"],[42,35,17,3],[42,37,17,3,"MultiFactorUser"],[42,52,17,3],[43,6,17,3,"key"],[43,9,17,3],[44,6,17,3,"value"],[44,11,17,3],[44,13,19,2],[44,22,19,2,"getSession"],[44,32,19,12,"getSession"],[44,33,19,12],[44,35,19,15],[45,8,20,4],[45,15,20,11],[45,19,20,15],[45,20,20,16,"_auth"],[45,25,20,21],[45,26,20,22,"native"],[45,32,20,28],[45,33,20,29,"getSession"],[45,43,20,39],[45,44,20,40],[45,45,20,41],[46,6,21,2],[48,6,23,2],[49,0,24,0],[50,0,25,0],[51,0,26,0],[52,0,27,0],[53,4,23,2],[54,6,23,2,"key"],[54,9,23,2],[55,6,23,2,"value"],[55,11,23,2],[56,8,23,2],[56,12,23,2,"_enroll"],[56,19,23,2],[56,26,23,2,"_asyncToGenerator"],[56,43,23,2],[56,44,23,2,"default"],[56,51,23,2],[56,53,28,2],[56,64,28,15,"multiFactorAssertion"],[56,84,28,35],[56,86,28,37,"displayName"],[56,97,28,48],[56,99,28,50],[57,10,29,4],[57,14,29,12,"token"],[57,19,29,17],[57,22,29,60,"multiFactorAssertion"],[57,42,29,80],[57,43,29,12,"token"],[57,48,29,17],[58,12,29,19,"secret"],[58,18,29,25],[58,21,29,60,"multiFactorAssertion"],[58,41,29,80],[58,42,29,19,"secret"],[58,48,29,25],[59,12,29,27,"totpSecret"],[59,22,29,37],[59,25,29,60,"multiFactorAssertion"],[59,45,29,80],[59,46,29,27,"totpSecret"],[59,56,29,37],[60,12,29,39,"verificationCode"],[60,28,29,55],[60,31,29,60,"multiFactorAssertion"],[60,51,29,80],[60,52,29,39,"verificationCode"],[60,68,29,55],[61,10,30,4],[61,14,30,8,"token"],[61,19,30,13],[61,23,30,17,"secret"],[61,29,30,23],[61,31,30,25],[62,12,31,6],[62,18,31,12],[62,22,31,16],[62,23,31,17,"_auth"],[62,28,31,22],[62,29,31,23,"native"],[62,35,31,29],[62,36,31,30,"finalizeMultiFactorEnrollment"],[62,65,31,59],[62,66,31,60,"token"],[62,71,31,65],[62,73,31,67,"secret"],[62,79,31,73],[62,81,31,75,"displayName"],[62,92,31,86],[62,93,31,87],[63,10,32,4],[63,11,32,5],[63,17,32,11],[63,21,32,15,"totpSecret"],[63,31,32,25],[63,35,32,29,"verificationCode"],[63,51,32,45],[63,53,32,47],[64,12,33,6],[64,18,33,12],[64,22,33,16],[64,23,33,17,"_auth"],[64,28,33,22],[64,29,33,23,"native"],[64,35,33,29],[64,36,33,30,"finalizeTotpEnrollment"],[64,58,33,52],[64,59,33,53,"totpSecret"],[64,69,33,63],[64,71,33,65,"verificationCode"],[64,87,33,81],[64,89,33,83,"displayName"],[64,100,33,94],[64,101,33,95],[65,10,34,4],[65,11,34,5],[65,17,34,11],[66,12,35,6],[66,18,35,12],[66,22,35,16,"Error"],[66,27,35,21],[66,28,35,22],[66,85,35,79],[66,86,35,80],[67,10,36,4],[69,10,38,4],[70,10,39,4],[71,10,40,4],[71,17,40,11],[71,21,40,11,"reload"],[71,29,40,17],[71,30,40,17,"reload"],[71,36,40,17],[71,38,40,18],[71,42,40,22],[71,43,40,23,"_auth"],[71,48,40,28],[71,49,40,29,"currentUser"],[71,60,40,40],[71,61,40,41],[72,8,41,2],[72,9,41,3],[73,8,41,3],[73,17,28,8,"enroll"],[73,23,28,14,"enroll"],[73,24,28,14,"_x"],[73,26,28,14],[73,28,28,14,"_x2"],[73,31,28,14],[74,10,28,14],[74,17,28,14,"_enroll"],[74,24,28,14],[74,25,28,14,"apply"],[74,30,28,14],[74,37,28,14,"arguments"],[74,46,28,14],[75,8,28,14],[76,8,28,14],[76,15,28,8,"enroll"],[76,21,28,14],[77,6,28,14],[78,4,28,14],[79,6,28,14,"key"],[79,9,28,14],[80,6,28,14,"value"],[80,11,28,14],[81,8,28,14],[81,12,28,14,"_unenroll"],[81,21,28,14],[81,28,28,14,"_asyncToGenerator"],[81,45,28,14],[81,46,28,14,"default"],[81,53,28,14],[81,55,43,2],[81,66,43,17,"enrollmentId"],[81,78,43,29],[81,80,43,31],[82,10,44,4],[82,16,44,10],[82,20,44,14],[82,21,44,15,"_auth"],[82,26,44,20],[82,27,44,21,"native"],[82,33,44,27],[82,34,44,28,"unenrollMultiFactor"],[82,53,44,47],[82,54,44,48,"enrollmentId"],[82,66,44,60],[82,67,44,61],[83,10,46,4],[83,14,46,8],[83,18,46,12],[83,19,46,13,"_auth"],[83,24,46,18],[83,25,46,19,"currentUser"],[83,36,46,30],[83,38,46,32],[84,12,47,6],[84,19,47,13],[84,23,47,13,"reload"],[84,31,47,19],[84,32,47,19,"reload"],[84,38,47,19],[84,40,47,20],[84,44,47,24],[84,45,47,25,"_auth"],[84,50,47,30],[84,51,47,31,"currentUser"],[84,62,47,42],[84,63,47,43],[85,10,48,4],[86,8,49,2],[86,9,49,3],[87,8,49,3],[87,17,43,8,"unenroll"],[87,25,43,16,"unenroll"],[87,26,43,16,"_x3"],[87,29,43,16],[88,10,43,16],[88,17,43,16,"_unenroll"],[88,26,43,16],[88,27,43,16,"apply"],[88,32,43,16],[88,39,43,16,"arguments"],[88,48,43,16],[89,8,43,16],[90,8,43,16],[90,15,43,8,"unenroll"],[90,23,43,16],[91,6,43,16],[92,4,43,16],[93,2,43,16],[94,0,43,16],[94,3]],"functionMap":{"names":["<global>","multiFactor","MultiFactorUser","MultiFactorUser#constructor","MultiFactorUser#getSession","MultiFactorUser#enroll","MultiFactorUser#unenroll"],"mappings":"AAA;OCI;CDE;OEE;ECC;GDO;EEE;GFE;EGO;GHa;EIE;GJM;CFC"},"hasCjsExports":false},"type":"js/module"}]}