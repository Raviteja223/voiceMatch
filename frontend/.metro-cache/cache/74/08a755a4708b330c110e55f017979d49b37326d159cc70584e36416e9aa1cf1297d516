{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"./passwordPolicyApi","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":18,"column":0,"index":633},"end":{"line":18,"column":58,"index":691}}],"key":"+Z+OtV3PGlY7Sv5jjeN90k76n08=","exportNames":["*"],"imports":1}},{"name":"./PasswordPolicyImpl","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":19,"column":0,"index":692},"end":{"line":19,"column":58,"index":750}}],"key":"mAB5Ff/B26WZI7mHToXg/sfVj68=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"PasswordPolicyMixin\", {\n    enumerable: true,\n    get: function () {\n      return PasswordPolicyMixin;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _passwordPolicyApi = require(_dependencyMap[1], \"./passwordPolicyApi\");\n  var _PasswordPolicyImpl = require(_dependencyMap[2], \"./PasswordPolicyImpl\");\n  /*\n   * Copyright (c) 2016-present Invertase Limited & Contributors\n   *\n   * Licensed under the Apache License, Version 2.0 (the \"License\");\n   * you may not use this library except in compliance with the License.\n   * You may obtain a copy of the License at\n   *\n   *   http://www.apache.org/licenses/LICENSE-2.0\n   *\n   * Unless required by applicable law or agreed to in writing, software\n   * distributed under the License is distributed on an \"AS IS\" BASIS,\n   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   * See the License for the specific language governing permissions and\n   * limitations under the License.\n   *\n   */\n\n  var EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION = 1;\n\n  /**\n   * Password policy mixin - provides password policy caching and validation.\n   * Expects the target object to have: _tenantId, _projectPasswordPolicy,\n   * _tenantPasswordPolicies, and app.options.apiKey\n   */\n  var PasswordPolicyMixin = {\n    _getPasswordPolicyInternal() {\n      if (this._tenantId === null) {\n        return this._projectPasswordPolicy;\n      }\n      return this._tenantPasswordPolicies[this._tenantId];\n    },\n    _updatePasswordPolicy() {\n      var _this = this;\n      return (0, _asyncToGenerator.default)(function* () {\n        var response = yield (0, _passwordPolicyApi.fetchPasswordPolicy)(_this);\n        var passwordPolicy = new _PasswordPolicyImpl.PasswordPolicyImpl(response);\n        if (_this._tenantId === null) {\n          _this._projectPasswordPolicy = passwordPolicy;\n        } else {\n          _this._tenantPasswordPolicies[_this._tenantId] = passwordPolicy;\n        }\n      })();\n    },\n    _recachePasswordPolicy() {\n      var _this2 = this;\n      return (0, _asyncToGenerator.default)(function* () {\n        if (_this2._getPasswordPolicyInternal()) {\n          yield _this2._updatePasswordPolicy();\n        }\n      })();\n    },\n    validatePassword(password) {\n      var _this3 = this;\n      return (0, _asyncToGenerator.default)(function* () {\n        if (!_this3._getPasswordPolicyInternal()) {\n          yield _this3._updatePasswordPolicy();\n        }\n        var passwordPolicy = _this3._getPasswordPolicyInternal();\n        if (passwordPolicy.schemaVersion !== EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION) {\n          throw new Error('auth/unsupported-password-policy-schema-version: The password policy received from the backend uses a schema version that is not supported by this version of the SDK.');\n        }\n        return passwordPolicy.validatePassword(password);\n      })();\n    }\n  };\n});","lineCount":87,"map":[[12,2,28,0,"Object"],[12,8,28,0],[12,9,28,0,"defineProperty"],[12,23,28,0],[12,24,28,0,"exports"],[12,31,28,0],[13,4,28,0,"enumerable"],[13,14,28,0],[14,4,28,0,"get"],[14,7,28,0],[14,18,28,0,"get"],[14,19,28,0],[15,6,28,0],[15,13,28,0,"PasswordPolicyMixin"],[15,32,28,0],[16,4,28,0],[17,2,28,0],[18,2,66,2],[18,6,66,2,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,66,2],[18,45,66,2,"require"],[18,52,66,2],[18,53,66,2,"_dependencyMap"],[18,67,66,2],[19,2,66,2],[19,6,66,2,"_asyncToGenerator"],[19,23,66,2],[19,26,66,2,"_interopDefault"],[19,41,66,2],[19,42,66,2,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,66,2],[20,2,18,0],[20,6,18,0,"_passwordPolicyApi"],[20,24,18,0],[20,27,18,0,"require"],[20,34,18,0],[20,35,18,0,"_dependencyMap"],[20,49,18,0],[21,2,19,0],[21,6,19,0,"_PasswordPolicyImpl"],[21,25,19,0],[21,28,19,0,"require"],[21,35,19,0],[21,36,19,0,"_dependencyMap"],[21,50,19,0],[22,2,1,0],[23,0,2,0],[24,0,3,0],[25,0,4,0],[26,0,5,0],[27,0,6,0],[28,0,7,0],[29,0,8,0],[30,0,9,0],[31,0,10,0],[32,0,11,0],[33,0,12,0],[34,0,13,0],[35,0,14,0],[36,0,15,0],[37,0,16,0],[39,2,21,0],[39,6,21,6,"EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION"],[39,45,21,45],[39,48,21,48],[39,49,21,49],[41,2,23,0],[42,0,24,0],[43,0,25,0],[44,0,26,0],[45,0,27,0],[46,2,28,7],[46,6,28,13,"PasswordPolicyMixin"],[46,25,28,32],[46,28,28,35],[47,4,29,2,"_getPasswordPolicyInternal"],[47,30,29,28,"_getPasswordPolicyInternal"],[47,31,29,28],[47,33,29,31],[48,6,30,4],[48,10,30,8],[48,14,30,12],[48,15,30,13,"_tenantId"],[48,24,30,22],[48,29,30,27],[48,33,30,31],[48,35,30,33],[49,8,31,6],[49,15,31,13],[49,19,31,17],[49,20,31,18,"_projectPasswordPolicy"],[49,42,31,40],[50,6,32,4],[51,6,33,4],[51,13,33,11],[51,17,33,15],[51,18,33,16,"_tenantPasswordPolicies"],[51,41,33,39],[51,42,33,40],[51,46,33,44],[51,47,33,45,"_tenantId"],[51,56,33,54],[51,57,33,55],[52,4,34,2],[52,5,34,3],[53,4,36,8,"_updatePasswordPolicy"],[53,25,36,29,"_updatePasswordPolicy"],[53,26,36,29],[53,28,36,32],[54,6,36,32],[54,10,36,32,"_this"],[54,15,36,32],[55,6,36,32],[55,17,36,32,"_asyncToGenerator"],[55,34,36,32],[55,35,36,32,"default"],[55,42,36,32],[56,8,37,4],[56,12,37,10,"response"],[56,20,37,18],[56,29,37,27],[56,33,37,27,"fetchPasswordPolicy"],[56,51,37,46],[56,52,37,46,"fetchPasswordPolicy"],[56,71,37,46],[56,73,37,47,"_this"],[56,78,37,51],[56,79,37,52],[57,8,38,4],[57,12,38,10,"passwordPolicy"],[57,26,38,24],[57,29,38,27],[57,33,38,31,"PasswordPolicyImpl"],[57,52,38,49],[57,53,38,49,"PasswordPolicyImpl"],[57,71,38,49],[57,72,38,50,"response"],[57,80,38,58],[57,81,38,59],[58,8,39,4],[58,12,39,8,"_this"],[58,17,39,12],[58,18,39,13,"_tenantId"],[58,27,39,22],[58,32,39,27],[58,36,39,31],[58,38,39,33],[59,10,40,6,"_this"],[59,15,40,10],[59,16,40,11,"_projectPasswordPolicy"],[59,38,40,33],[59,41,40,36,"passwordPolicy"],[59,55,40,50],[60,8,41,4],[60,9,41,5],[60,15,41,11],[61,10,42,6,"_this"],[61,15,42,10],[61,16,42,11,"_tenantPasswordPolicies"],[61,39,42,34],[61,40,42,35,"_this"],[61,45,42,39],[61,46,42,40,"_tenantId"],[61,55,42,49],[61,56,42,50],[61,59,42,53,"passwordPolicy"],[61,73,42,67],[62,8,43,4],[63,6,43,5],[64,4,44,2],[64,5,44,3],[65,4,46,8,"_recachePasswordPolicy"],[65,26,46,30,"_recachePasswordPolicy"],[65,27,46,30],[65,29,46,33],[66,6,46,33],[66,10,46,33,"_this2"],[66,16,46,33],[67,6,46,33],[67,17,46,33,"_asyncToGenerator"],[67,34,46,33],[67,35,46,33,"default"],[67,42,46,33],[68,8,47,4],[68,12,47,8,"_this2"],[68,18,47,12],[68,19,47,13,"_getPasswordPolicyInternal"],[68,45,47,39],[68,46,47,40],[68,47,47,41],[68,49,47,43],[69,10,48,6],[69,16,48,12,"_this2"],[69,22,48,16],[69,23,48,17,"_updatePasswordPolicy"],[69,44,48,38],[69,45,48,39],[69,46,48,40],[70,8,49,4],[71,6,49,5],[72,4,50,2],[72,5,50,3],[73,4,52,8,"validatePassword"],[73,20,52,24,"validatePassword"],[73,21,52,25,"password"],[73,29,52,33],[73,31,52,35],[74,6,52,35],[74,10,52,35,"_this3"],[74,16,52,35],[75,6,52,35],[75,17,52,35,"_asyncToGenerator"],[75,34,52,35],[75,35,52,35,"default"],[75,42,52,35],[76,8,53,4],[76,12,53,8],[76,13,53,9,"_this3"],[76,19,53,13],[76,20,53,14,"_getPasswordPolicyInternal"],[76,46,53,40],[76,47,53,41],[76,48,53,42],[76,50,53,44],[77,10,54,6],[77,16,54,12,"_this3"],[77,22,54,16],[77,23,54,17,"_updatePasswordPolicy"],[77,44,54,38],[77,45,54,39],[77,46,54,40],[78,8,55,4],[79,8,56,4],[79,12,56,10,"passwordPolicy"],[79,26,56,24],[79,29,56,27,"_this3"],[79,35,56,31],[79,36,56,32,"_getPasswordPolicyInternal"],[79,62,56,58],[79,63,56,59],[79,64,56,60],[80,8,58,4],[80,12,58,8,"passwordPolicy"],[80,26,58,22],[80,27,58,23,"schemaVersion"],[80,40,58,36],[80,45,58,41,"EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION"],[80,84,58,80],[80,86,58,82],[81,10,59,6],[81,16,59,12],[81,20,59,16,"Error"],[81,25,59,21],[81,26,60,8],[81,194,61,6],[81,195,61,7],[82,8,62,4],[83,8,64,4],[83,15,64,11,"passwordPolicy"],[83,29,64,25],[83,30,64,26,"validatePassword"],[83,46,64,42],[83,47,64,43,"password"],[83,55,64,51],[83,56,64,52],[84,6,64,53],[85,4,65,2],[86,2,66,0],[86,3,66,1],[87,0,66,2],[87,3]],"functionMap":{"names":["<global>","_getPasswordPolicyInternal","_updatePasswordPolicy","_recachePasswordPolicy","validatePassword"],"mappings":"AAA;EC4B;GDK;EEE;GFQ;EGE;GHI;EIE;GJa"},"hasCjsExports":false},"type":"js/module"}]}